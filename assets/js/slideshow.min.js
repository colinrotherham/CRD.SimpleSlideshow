/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(M,B){function s(){b.isManual||(C=setTimeout(function(){j()},b.interval))}function x(){clearTimeout(D);clearTimeout(C)}function E(a){j(a,{isPrev:!1})}function F(a){j(a,{isPrev:!0})}function j(e,G){var g=$(this),f;h=!(!G||!G.isPrev);if(!t&&(!e||e&&!g.hasClass(b.classDisabled))){if(g.hasClass(b.classSlide)){if(g.is("a"))return;f=c.index(g)}g=f;f=a.slide;var j=b.classSlide,m=a.number,k=c.length;"undefined"!==typeof g?(f=c.eq(g),m=g+1):(f=h?f.prev("."+j):f.next("."+j),m=h?m-1:m+
	1,f.length||(b.canLoop||(h=!h),f=h?c.eq(k-1):c.eq(0),m=h?k:1));a.slideNext=f;a.number=m;a.slide.is(a.slideNext)||(t=!0,H(),u(b.isCarousel?b.time:0,function(){c.removeClass(b.classActive);a.slideNext.addClass(b.classActive);a.slide=a.slideNext;t=!1;v[n+"Transition"]="";e&&"click"===e.type&&a.slide.focus();B&&B.call(a)}),x())}e?d.is(a.slide)||e.preventDefault():s()}function u(a,c,d){I&&b.isCarousel?(d=d||0,k.one(n.toLowerCase()+"TransitionEnd transitionend",c),v[n+"Transition"]=a?a/1E3+"s":"",v[n+"Transform"]=
	"translateX("+-1*(w(null,!0)-d)+"%)"):k.animate({left:w()+"%"},a,c)}function w(b,d){b=0===b||b?b:a.number-1;return d?b*(100/c.length):-100*b}function J(c){q&&(c?j(c,{slide:y.index(this)}):y.removeAttr("class").eq(a.number-1).addClass(b.classActive))}function H(){if(!b.canLoop)switch(a.prev.add(a.next).removeClass(b.classDisabled),a.number){case 1:a.prev.addClass(b.classDisabled);break;case c.length:a.next.addClass(b.classDisabled)}J()}function K(b){z&&clearTimeout(z);z=setTimeout(function(){a.width=
	d.outerWidth()},b?300:0)}for(var a=this,l=["ms","O","Moz","Webkit",""],n=l[l.length],v,b={next:"button.next",previous:"button.previous",classStrip:"strip",classSlide:"slide",classActive:"sticky",classMarkers:"markers",classDisabled:"disabled",delay:3E3,interval:5E3,time:600,canLoop:!0,isManual:!0,isCarousel:!0},d,c,k,q,y,D,C,z,t,h,I,N=document.body.style,A=l.length;A--;)if("string"===typeof N[l[A]+"Transition"]){n=l[A];break}I=!!n;var L="ontouchstart"in window||window.DocumentTouch&&document instanceof
	DocumentTouch;$.each(M,function(a,c){b[a]=c});a.element=d;a.strip=k;a.slides=c;a.init=function(){d=$(b.slideshow);c=d.find("."+b.classSlide);k=d.find("."+b.classStrip);if(d.length&&!(2>c.length)){v=k[0].style;a.slide=c.filter("."+b.classActive);a.number=c.index(a.slide)+1;a.slide.length||(a.number=1,a.slide=c.eq(a.number-1).addClass(b.classActive));L&&(b.isCarousel=!0);k.width(100*c.length+"%");c.width(100/c.length+"%");for(var e=c.length,h;e--;)h=w(e,!0)+"%",c.eq(e).css({left:h,display:"block"}).attr("tabindex",
	"-1");u(0);d.mouseenter(x).mouseleave(s);if(L){var g,f,n=function(b){var d=b.originalEvent,e=d.touches[0];1<e.length||d.scale&&1!==d.scale||(g=e.pageX-l.x,f=e.pageY-l.y,"undefined"===typeof p&&(p=!!(p||Math.abs(g)<Math.abs(f))),p||b.preventDefault(),u(0,function(){},g/a.width*(100/c.length)))},m=function(){p||(d.off("touchmove",r),d.off("touchend touchcancel",r),j())},l,p,r="."+b.classStrip;d.on("touchstart",r,function(a){t||(a=a.originalEvent.touches[0],l={x:a.pageX,y:a.pageY,time:+new Date},p=f=
	g=void 0,d.on("touchmove",r,n),d.on("touchend touchcancel",r,m))});d.on("click",r,function(a){p||a.preventDefault()});$(window).resize(K)}else c.click(j),a.next=d.find(b.next).on("click",E).show(),a.prev=d.find(b.previous).on("click",F).show();if(b.classMarkers){q=$("<ul />").addClass(b.classMarkers);for(e=c.length;e--;)q.prepend($('<li><a href="#" role="button">'+(e+1)+"</a></li>"));y=q.find("a").click(J);d.append(q);q.show()}H();K();D=setTimeout(s,b.delay)}};a.start=s;a.stop=x;a.next=E;a.prev=F;
	a.transition=u;a.getTransitionX=w};