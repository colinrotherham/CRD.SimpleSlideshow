/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/
	
	var CRD=CRD||{};

	CRD.Slideshow=function(B,x){function n(){c.isManual||(y=setTimeout(function(){e()},c.interval))}function r(){clearTimeout(z);clearTimeout(y)}function e(b,d){h=!(!b||!b.data||!b.data.isBack);var g=$(this);if(!s&&(!b||b&&!g.hasClass(c.classDisabled))){if(g.hasClass(c.classSlide)){if(g.is("a"))return;d=a.slides.index(g)}var g=d,j=a.slide,e=a.slides,f=c.classSlide,l=a.number,k=e.length;"undefined"!==typeof g?(j=e.eq(g),l=g+1):(j=h?j.prev("."+f):j.next("."+f),l=h?l-1:l+1,j.length||(c.canLoop||(h=!h),j=
	h?e.eq(k-1):e.eq(0),l=h?k:1));a.slideNext=j;a.number=l;a.slide.is(a.slideNext)||(s=!0,A(),t(),u(c.isCarousel?c.time:0,function(){a.slides.removeClass(c.classActive);a.slideNext.addClass(c.classActive);a.slide=a.slideNext;s=!1;p[m+"Transition"]="";b&&"click"===b.type&&a.slide.focus();x&&x.call(a)}),r())}b?b.preventDefault():n()}function u(b,d){c.isCSS?(p[m+"Transition"]=b?b/1E3+"s":"",p[m+"Transform"]="translateX(-"+k(null,!0)+"%)"):a.strip.animate({left:k()+"%"},b);d&&setTimeout(d,b)}function k(b,
	c){b=0===b||b?b:a.number-1;return c?b*(100/a.slides.length):-100*b}function t(b){if(f){var d=a.number-1;b?e(b,v.index(this)):v.removeAttr("class").eq(d).addClass(c.classActive)}}function A(){if(!c.canLoop)switch(a.previous.add(a.next).removeClass(c.classDisabled),a.number){case 1:a.previous.addClass(c.classDisabled);break;case a.slides.length:a.next.addClass(c.classDisabled)}}for(var a=this,q=["ms","O","Moz","Webkit",""],m=q[0],C=document.body.style,w=q.length;w--;)"string"===typeof C[q[w]+"Transition"]&&
	(m=q[w]);var c={next:"button.next",previous:"button.previous",classStrip:"strip",classSlide:"slide",classActive:"sticky",classMarkers:"markers",classDisabled:"disabled",delay:3E3,interval:5E3,time:600,canLoop:!0,isManual:!0,isCarousel:!0,isCSS:!!m},f,v,z,y,s=!1,h=!1,p;$.each(B,function(a,d){c[a]=d});a.init=function(){var b=$(c.slideshow);a.strip=b.find("."+c.classStrip);a.slides=b.find("."+c.classSlide);if(b.length&&!(2>a.slides.length)){a.next=b.find(c.next).show();a.previous=b.find(c.previous).show();
	a.strip.width(100*a.slides.length+"%");a.slides.width(100/a.slides.length+"%");a.slide=a.slides.filter("."+c.classActive);a.number=a.slides.index(a.slide)+1;a.slide.length||(a.number=1,a.slide=a.slides.eq(a.number-1).addClass(c.classActive));p=a.strip[0].style;a.element=b;A();for(var b=a.slides.length,d;b--;)d=k(b,!0)+"%",a.slides.eq(b).css({left:d,display:"block"}).attr("tabindex","-1");u(0);a.next.on("click",{isBack:!1},e);a.previous.on("click",{isBack:!0},e);a.slides.click(e);a.element.mouseenter(r).mouseleave(n);
	if(c.classMarkers){f=$("<ul />").addClass(c.classMarkers);for(b=a.slides.length;b--;)f.prepend($('<li><a href="#" role="button">'+(b+1)+"</a></li>"));v=f.find("a").click(t);a.element.append(f);t();f.show()}z=setTimeout(n,c.delay)}};a.start=n;a.stop=r;a.change=e;a.transition=u;a.getTransitionX=k};