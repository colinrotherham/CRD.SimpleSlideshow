/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(K,B){function s(){b.isManual||(C=setTimeout(function(){h()},b.interval))}function x(){clearTimeout(D);clearTimeout(C)}function h(c,E){j=!(!c||!c.data||!c.data.isBack);var f=$(this);if(!t&&(!c||c&&!f.hasClass(b.classDisabled))){if(f.hasClass(b.classSlide)){if(f.is("a"))return;E=d.index(f)}var f=E,g=a.slide,h=b.classSlide,m=a.number,k=d.length;"undefined"!==typeof f?(g=d.eq(f),m=f+1):(g=j?g.prev("."+h):g.next("."+h),m=j?m-1:m+1,g.length||(b.canLoop||(j=!j),g=j?d.eq(k-1):d.eq(0),
	m=j?k:1));a.slideNext=g;a.number=m;a.slide.is(a.slideNext)||(t=!0,F(),u(b.isCarousel?b.time:0,function(){d.removeClass(b.classActive);a.slideNext.addClass(b.classActive);a.slide=a.slideNext;t=!1;v[n+"Transition"]="";c&&"click"===c.type&&a.slide.focus();B&&B.call(a)}),x())}c?e.is(a.slide)||c.preventDefault():s()}function u(a,d,e){G&&b.isCarousel?(e=e||0,k.one(n.toLowerCase()+"TransitionEnd transitionend",d),v[n+"Transition"]=a?a/1E3+"s":"",v[n+"Transform"]="translateX("+-1*(w(null,!0)-e)+"%)"):k.animate({left:w()+
	"%"},a,d)}function w(c,b){c=0===c||c?c:a.number-1;return b?c*(100/d.length):-100*c}function H(c){q&&(c?h(c,y.index(this)):y.removeAttr("class").eq(a.number-1).addClass(b.classActive))}function F(){if(!b.canLoop)switch(a.previous.add(a.next).removeClass(b.classDisabled),a.number){case 1:a.previous.addClass(b.classDisabled);break;case d.length:a.next.addClass(b.classDisabled)}H()}function I(b){z&&clearTimeout(z);z=setTimeout(function(){a.width=e.outerWidth()},b?300:0)}for(var a=this,l=["ms","O","Moz",
	"Webkit",""],n=l[l.length],v,b={next:"button.next",previous:"button.previous",classStrip:"strip",classSlide:"slide",classActive:"sticky",classMarkers:"markers",classDisabled:"disabled",delay:3E3,interval:5E3,time:600,canLoop:!0,isManual:!0,isCarousel:!0},e,d,k,q,y,D,C,z,t,j,G,L=document.body.style,A=l.length;A--;)if("string"===typeof L[l[A]+"Transition"]){n=l[A];break}G=!!n;var J="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;$.each(K,function(a,d){b[a]=d});a.element=
	e;a.strip=k;a.slides=d;a.init=function(){e=$(b.slideshow);d=e.find("."+b.classSlide);k=e.find("."+b.classStrip);if(e.length&&!(2>d.length)){v=k[0].style;a.slide=d.filter("."+b.classActive);a.number=d.index(a.slide)+1;a.slide.length||(a.number=1,a.slide=d.eq(a.number-1).addClass(b.classActive));J&&(b.isCarousel=!0);k.width(100*d.length+"%");d.width(100/d.length+"%");for(var c=d.length,j;c--;)j=w(c,!0)+"%",d.eq(c).css({left:j,display:"block"}).attr("tabindex","-1");u(0);e.mouseenter(x).mouseleave(s);
	if(J){var f,g,n=function(b){var c=b.originalEvent,e=c.touches[0];1<e.length||c.scale&&1!==c.scale||(f=e.pageX-l.x,g=e.pageY-l.y,"undefined"===typeof p&&(p=!!(p||Math.abs(f)<Math.abs(g))),p||b.preventDefault(),u(0,function(){},f/a.width*(100/d.length)))},m=function(){p||(e.off("touchmove",r),e.off("touchend touchcancel",r),h())},l,p,r="."+b.classStrip;e.on("touchstart",r,function(a){t||(a=a.originalEvent.touches[0],l={x:a.pageX,y:a.pageY,time:+new Date},p=g=f=void 0,e.on("touchmove",r,n),e.on("touchend touchcancel",
	r,m))});e.on("click",r,function(a){p||a.preventDefault()});$(window).resize(I)}else d.click(h),a.next=e.find(b.next).on("click",{isBack:!1},h).show(),a.previous=e.find(b.previous).on("click",{isBack:!0},h).show();if(b.classMarkers){q=$("<ul />").addClass(b.classMarkers);for(c=d.length;c--;)q.prepend($('<li><a href="#" role="button">'+(c+1)+"</a></li>"));y=q.find("a").click(H);e.append(q);q.show()}F();I();D=setTimeout(s,b.delay)}};a.start=s;a.stop=x;a.change=h;a.transition=u;a.getTransitionX=w};