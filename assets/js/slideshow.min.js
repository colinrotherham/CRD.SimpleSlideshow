/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(Q,G){function t(){b.isManual||(H=setTimeout(function(){k()},b.interval))}function u(){clearTimeout(I);clearTimeout(H)}function J(a){k(a,{isPrev:!1})}function K(a){k(a,{isPrev:!0})}function k(e,d){var f=$(this),n=d&&d.slide;h=!(!d||!d.isPrev);if(!v&&(!e||e&&!f.hasClass(b.classDisabled))){if(f.hasClass(b.classSlide)){if(f.is("a"))return;n=c.index(f)}var l=a.slide,k=b.classSlide,g=a.number,j=c.length;"undefined"!==typeof n?(l=c.eq(n),g=n+1):(l=h?l.prev("."+k):l.next("."+k),g=h?
	g-1:g+1,l.length||(b.canLoop||(h=!h),l=h?c.eq(j-1):c.eq(0),g=h?j:1));a.slideNext=l;a.number=g;if(!a.slide.is(a.slideNext)||w)v=!0,u(),L(),x(b.isCarousel?b.time:0,function(){M(e)})}e?f.is(a.slide)||e.preventDefault():t()}function x(a,c,d){if(N&&b.isCarousel){d=d||0;if(c)q.one(m.toLowerCase()+"TransitionEnd transitionend",c);y[m+"Transition"]=a?a/1E3+"s":"";y[m+"Transform"]="translateX("+-1*(z(null,!0)-d)+"%)"}else q.animate({left:z()+"%"},a,c)}function M(e){c.removeClass(b.classActive);a.slideNext.addClass(b.classActive);
	a.slide=a.slideNext;v=!1;y[m+"Transition"]="";e&&"click"===e.type&&a.slide.focus();A();G&&G.call(a)}function z(b,d){b=0===b||b?b:a.number-1;return d?b*(100/c.length):-100*b}function A(c){s&&(c?k(c,{slide:B.index(this)}):B.removeAttr("class").eq(a.number-1).addClass(b.classActive))}function L(){if(!b.canLoop&&!w)switch(O.removeClass(b.classDisabled),a.number){case 1:C.addClass(b.classDisabled);break;case c.length:D.addClass(b.classDisabled)}}function P(b){E&&clearTimeout(E);E=setTimeout(function(){a.width=
	d.outerWidth()},b?300:0)}for(var a=this,p=["ms","O","Moz","Webkit",""],m=p[p.length],y,b={next:"button.next",previous:"button.previous",classStrip:"strip",classSlide:"slide",classActive:"sticky",classMarkers:"markers",classDisabled:"disabled",delay:3E3,interval:5E3,time:400,canLoop:!0,isManual:!0,isCarousel:!0},d,c,q,s,B,O,C,D,I,H,E,v,h,N,R=document.body.style,F=p.length;F--;)if("string"===typeof R[p[F]+"Transition"]){m=p[F];break}N=!!m;var w="ontouchstart"in window||window.DocumentTouch&&document instanceof
	DocumentTouch;$.each(Q,function(a,c){b[a]=c});a.element=d;a.strip=q;a.slides=c;a.init=function(){d=$(b.slideshow);c=d.find("."+b.classSlide);q=d.find("."+b.classStrip);if(d.length&&!(2>c.length)){y=q[0].style;a.slide=c.filter("."+b.classActive);a.number=c.index(a.slide)+1;a.slide.length||(a.number=1,a.slide=c.eq(a.number-1).addClass(b.classActive));w&&(b.canLoop=!1,b.isCarousel=!0);q.width(100*c.length+"%");c.width(100/c.length+"%");for(var e=c.length,m;e--;)m=z(e,!0)+"%",c.eq(e).css({left:m,display:"block"}).attr("tabindex",
	"-1");x(0);d.mouseenter(u).mouseleave(t);if(w){var f,n,l=function(b){var d=b.originalEvent,e=d.touches[0];if(!(1<e.length||d.scale&&1!==d.scale))if(f=e.pageX-g.x,n=e.pageY-g.y,"undefined"===typeof j&&(j=!!(j||Math.abs(f)<Math.abs(n))),!j){b.preventDefault();u();if((h=0<f)&&1===a.number||!h&&a.number===c.length)f/=Math.abs(f)/a.width+1;x(0,void 0,f/a.width*(100/c.length))}},p=function(){if(!j){var b=250>+new Date-g.time&&20<Math.abs(f)||Math.abs(f)>a.width/3;k(void 0,b?{isPrev:h}:{slide:a.number-1})}d.off("touchmove",
	r);d.off("touchend touchcancel",r)},g,j,r="."+b.classStrip;d.on("touchstart",r,function(a){a=a.originalEvent.touches[0];v&&M();g={x:a.pageX,y:a.pageY,time:+new Date};j=n=f=void 0;d.on("touchmove",r,l);d.on("touchend touchcancel",r,p)});d.on("click",r,function(a){j||a.preventDefault()});$(window).resize(P)}else c.click(k),D=d.find(b.next).on("click",J),C=d.find(b.previous).on("click",K),O=C.add(D).css("display","block");if(b.classMarkers){s=$("<div />").addClass(b.classMarkers).on("click","button",
	A);for(e=c.length;e--;)s.prepend($("<button>"+(e+1)+"</button>"));B=s.find("button");d.append(s)}L();A();P();I=setTimeout(t,b.delay)}};a.start=t;a.stop=u;a.next=J;a.prev=K;a.transition=x;a.getTransitionX=z};