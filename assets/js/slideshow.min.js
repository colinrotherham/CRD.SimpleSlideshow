/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/
	
	var CRD=CRD||{};CRD.Slideshow=function(B,w){function n(){c.isManual||(x=setTimeout(function(){e()},c.interval))}function r(){clearTimeout(y);clearTimeout(x)}function e(b,d){h=!(!b||!b.data||!b.data.isBack);var f=$(this);if(!s&&(!b||b&&!f.hasClass(c.classDisabled))){if(f.hasClass(c.classSlide)){if(f.is("a"))return;d=a.slides.index(f)}var f=d,j=a.slide,e=a.slides,g=c.classSlide,l=a.number,k=e.length;"undefined"!==typeof f?(j=e.eq(f),l=f+1):(j=h?j.prev("."+g):j.next("."+g),l=h?l-1:l+1,j.length||(c.canLoop||(h=!h),j=h?e.eq(k-1):e.eq(0),l=h?k:1));a.slideNext=j;a.number=l;a.slide.is(a.slideNext)||(s=!0,z(),t(c.isCarousel?c.time:0,function(){a.slides.removeClass(c.classActive);a.slideNext.addClass(c.classActive);a.slide=a.slideNext;s=!1;p[m+"Transition"]="";b&&"click"===b.type&&a.slide.focus();w&&w.call(a)}),r())}b?b.preventDefault():n()}function t(b,d){c.isCSS?(p[m+"Transition"]=b?b/1E3+"s":"",p[m+"Transform"]="translateX(-"+k(null,!0)+"%)"):a.strip.animate({left:k()+"%"},b);d&&setTimeout(d,b)}function k(b,c){b=0===b||b?b:a.number-1;return c?b*(100/a.slides.length):-100*b}function A(b){g&&(b?e(b,u.index(this)):u.removeAttr("class").eq(a.number-1).addClass(c.classActive))}function z(){if(!c.canLoop)switch(a.previous.add(a.next).removeClass(c.classDisabled),a.number){case 1:a.previous.addClass(c.classDisabled);break;case a.slides.length:a.next.addClass(c.classDisabled)}A()}for(var a=this,q=["ms","O","Moz","Webkit",""],m=q[0],C=document.body.style,v=q.length;v--;)"string"===typeof C[q[v]+"Transition"]&&(m=q[v]);var c={next:"button.next",previous:"button.previous",classStrip:"strip",classSlide:"slide",classActive:"sticky",classMarkers:"markers",classDisabled:"disabled",delay:3E3,interval:5E3,time:600,canLoop:!0,isManual:!0,isCarousel:!0,isCSS:!!m},g,u,y,x,s,h,p;$.each(B,function(a,d){c[a]=d});a.init=function(){var b=$(c.slideshow),d=b.find("."+c.classSlide),f=b.find("."+c.classStrip);if(b.length&&!(2>d.length)){a.slide=d.filter("."+c.classActive);a.number=d.index(a.slide)+1;a.slide.length||(a.number=1,a.slide=d.eq(a.number-1).addClass(c.classActive));a.element=b;a.strip=f;a.slides=d;a.next=b.find(c.next).show();a.previous=b.find(c.previous).show();p=f[0].style;a.strip.width(100*a.slides.length+"%");a.slides.width(100/a.slides.length+"%");for(b=a.slides.length;b--;)d=k(b,!0)+"%",a.slides.eq(b).css({left:d,display:"block"}).attr("tabindex","-1");t(0);a.next.on("click",{isBack:!1},e);a.previous.on("click",{isBack:!0},e);a.slides.click(e);a.element.mouseenter(r).mouseleave(n);if(c.classMarkers){g=$("<ul />").addClass(c.classMarkers);for(b=a.slides.length;b--;)g.prepend($('<li><a href="#" role="button">'+(b+1)+"</a></li>"));u=g.find("a").click(A);a.element.append(g);g.show()}z();y=setTimeout(n,c.delay)}};a.start=n;a.stop=r;a.change=e;a.transition=t;a.getTransitionX=k};