/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(Q,F){function u(){c.isManual||(G=setTimeout(function(){k()},c.interval))}function v(){clearTimeout(H);clearTimeout(G)}function I(a){k(a,{isPrev:!1})}function J(a){k(a,{isPrev:!0})}function k(b,d){var f=$(this),n=d&&d.slide;g=!(!d||!d.isPrev);if(!w&&(!b||b&&!f.hasClass(c.classDisabled))){if(f.hasClass(c.classSlide)){if(f.is("a"))return;n=e.index(f)}var l=a.slide,k=c.classSlide,h=a.number,j=e.length;"undefined"!==typeof n?(l=e.eq(n),h=n+1):(l=g?l.prev("."+k):l.next("."+k),h=g?
	h-1:h+1,l.length||(c.canLoop||(g=!g),l=g?e.eq(j-1):e.eq(0),h=g?j:1));a.slideNext=l;a.number=h;if(!a.slide.is(a.slideNext)||x)w=!0,v(),K(),t(c.isCarousel?c.time:0,function(){L(b)})}b?f.is(a.slide)||b.preventDefault():u()}function t(b,d,f){if(g&&a.number===e.length||!g&&1===a.number)b*=1.5;if(M&&c.isCarousel){f=f||0;if(d)q.one(m.toLowerCase()+"TransitionEnd transitionend",d);y[m+"Transition"]=b?b/1E3+"s":"";y[m+"Transform"]="translateX("+-1*(z(null,!0)-f)+"%)"}else q.animate({left:z()+"%"},b,d)}function L(b){e.removeClass(c.classActive);
	a.slideNext.addClass(c.classActive);a.slide=a.slideNext;w=!1;y[m+"Transition"]="";b&&"click"===b.type&&a.slide.focus();F&&F.call(a)}function z(b,c){b=0===b||b?b:a.number-1;return c?b*(100/e.length):-100*b}function N(b){r&&(b?k(b,{slide:A.index(this)}):A.removeAttr("class").eq(a.number-1).addClass(c.classActive))}function K(){if(!c.canLoop&&!x)switch(O.removeClass(c.classDisabled),a.number){case 1:B.addClass(c.classDisabled);break;case e.length:C.addClass(c.classDisabled)}N()}function P(b){D&&clearTimeout(D);
	D=setTimeout(function(){a.width=d.outerWidth()},b?300:0)}for(var a=this,p=["ms","O","Moz","Webkit",""],m=p[p.length],y,c={next:"button.next",previous:"button.previous",classStrip:"strip",classSlide:"slide",classActive:"sticky",classMarkers:"markers",classDisabled:"disabled",delay:3E3,interval:5E3,time:400,canLoop:!0,isManual:!0,isCarousel:!0},d,e,q,r,A,O,B,C,H,G,D,w,g,M,R=document.body.style,E=p.length;E--;)if("string"===typeof R[p[E]+"Transition"]){m=p[E];break}M=!!m;var x="ontouchstart"in window||
	window.DocumentTouch&&document instanceof DocumentTouch;$.each(Q,function(a,d){c[a]=d});a.element=d;a.strip=q;a.slides=e;a.init=function(){d=$(c.slideshow);e=d.find("."+c.classSlide);q=d.find("."+c.classStrip);if(d.length&&!(2>e.length)){y=q[0].style;a.slide=e.filter("."+c.classActive);a.number=e.index(a.slide)+1;a.slide.length||(a.number=1,a.slide=e.eq(a.number-1).addClass(c.classActive));x&&(c.canLoop=!1,c.isCarousel=!0);q.width(100*e.length+"%");e.width(100/e.length+"%");for(var b=e.length,m;b--;)m=
	z(b,!0)+"%",e.eq(b).css({left:m,display:"block"}).attr("tabindex","-1");t(0);d.mouseenter(v).mouseleave(u);if(x){var f,n,l=function(c){var b=c.originalEvent,d=b.touches[0];if(!(1<d.length||b.scale&&1!==b.scale))if(f=d.pageX-h.x,n=d.pageY-h.y,"undefined"===typeof j&&(j=!!(j||Math.abs(f)<Math.abs(n))),!j){c.preventDefault();v();if((g=0<f)&&1===a.number||!g&&a.number===e.length)f/=Math.abs(f)/a.width+1;t(0,void 0,f/a.width*(100/e.length))}},p=function(){j||(250>+new Date-h.time&&20<Math.abs(f)||Math.abs(f)>
	a.width/3?k(void 0,{isPrev:g}):t(c.time));d.off("touchmove",s);d.off("touchend touchcancel",s)},h,j,s="."+c.classStrip;d.on("touchstart",s,function(a){a=a.originalEvent.touches[0];w&&L();h={x:a.pageX,y:a.pageY,time:+new Date};j=n=f=void 0;d.on("touchmove",s,l);d.on("touchend touchcancel",s,p)});d.on("click",s,function(a){j||a.preventDefault()});$(window).resize(P)}else e.click(k),C=d.find(c.next).on("click",I).show(),B=d.find(c.previous).on("click",J).show(),O=B.add(C);if(c.classMarkers){r=$("<ul />").addClass(c.classMarkers);
	for(b=e.length;b--;)r.prepend($('<li><a href="#" role="button">'+(b+1)+"</a></li>"));A=r.find("a").click(N);d.append(r);r.show()}K();P();H=setTimeout(u,c.delay)}};a.start=u;a.stop=v;a.next=I;a.prev=J;a.transition=t;a.getTransitionX=z};