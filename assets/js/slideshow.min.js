/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(I,A){function r(){c.isManual||(B=setTimeout(function(){h()},c.interval))}function v(){clearTimeout(C);clearTimeout(B)}function h(b,e){j=!(!b||!b.data||!b.data.isBack);var f=$(this);if(!w&&(!b||b&&!f.hasClass(c.classDisabled))){if(f.hasClass(c.classSlide)){if(f.is("a"))return;e=d.index(f)}var f=e,g=a.slide,h=c.classSlide,l=a.number,k=d.length;"undefined"!==typeof f?(g=d.eq(f),l=f+1):(g=j?g.prev("."+h):g.next("."+h),l=j?l-1:l+1,g.length||(c.canLoop||(j=!j),g=j?d.eq(k-1):d.eq(0),
	l=j?k:1));a.slideNext=g;a.number=l;a.slide.is(a.slideNext)||(w=!0,D(),s(c.isCarousel?c.time:0,function(){d.removeClass(c.classActive);a.slideNext.addClass(c.classActive);a.slide=a.slideNext;w=!1;t[m+"Transition"]="";b&&"click"===b.type&&a.slide.focus();A&&A.call(a)}),v())}b?b.preventDefault():r()}function s(b,a,c){E?(c=c||0,n.one(m.toLowerCase()+"TransitionEnd transitionend",a),t[m+"Transition"]=b?b/1E3+"s":"",t[m+"Transform"]="translateX("+-1*(u(null,!0)-c)+"%)"):n.animate({left:u()+"%"},b,a)}function u(b,
	c){b=0===b||b?b:a.number-1;return c?b*(100/d.length):-100*b}function F(b){p&&(b?h(b,x.index(this)):x.removeAttr("class").eq(a.number-1).addClass(c.classActive))}function D(){if(!c.canLoop)switch(a.previous.add(a.next).removeClass(c.classDisabled),a.number){case 1:a.previous.addClass(c.classDisabled);break;case d.length:a.next.addClass(c.classDisabled)}F()}function G(b){y&&clearTimeout(y);y=setTimeout(function(){a.width=e.outerWidth()},b?300:0)}for(var a=this,q=["ms","O","Moz","Webkit",""],m=q[q.length],
	t,c={next:"button.next",previous:"button.previous",classStrip:"strip",classSlide:"slide",classActive:"sticky",classMarkers:"markers",classDisabled:"disabled",delay:3E3,interval:5E3,time:600,canLoop:!0,isManual:!0,isCarousel:!0},e,d,n,p,x,C,B,y,w,j,E,J=document.body.style,z=q.length;z--;)if("string"===typeof J[q[z]+"Transition"]){m=q[z];break}E=!!m;var H="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;$.each(I,function(a,d){c[a]=d});a.element=e;a.strip=n;a.slides=d;
	a.init=function(){e=$(c.slideshow);d=e.find("."+c.classSlide);n=e.find("."+c.classStrip);if(e.length&&!(2>d.length)){t=n[0].style;a.slide=d.filter("."+c.classActive);a.number=d.index(a.slide)+1;a.slide.length||(a.number=1,a.slide=d.eq(a.number-1).addClass(c.classActive));H&&(c.isCarousel=!0);n.width(100*d.length+"%");d.width(100/d.length+"%");for(var b=d.length,j;b--;)j=u(b,!0)+"%",d.eq(b).css({left:j,display:"block"}).attr("tabindex","-1");s(0);e.mouseenter(v).mouseleave(r);if(H){var f,g,m,l,k,b=
	"."+c.classStrip;e.on("touchstart",b,function(a){a=a.originalEvent.touches[0];m=a.pageX;l=a.pageY;k=g=f=void 0});e.on("touchmove",b,function(b){var c=b.originalEvent,e=c.touches[0];1<e.length||c.scale&&1!==c.scale||(f=e.pageX-m,g=e.pageY-l,"undefined"===typeof k&&(k=!!(k||Math.abs(f)<Math.abs(g))),k||b.preventDefault(),s(0,function(){},f/a.width*(100/d.length)))});e.on("touchend touchcancel",b,function(){k||h()});e.on("click",b,function(a){k||a.preventDefault()});$(window).resize(G)}else d.click(h),
	a.next=e.find(c.next).on("click",{isBack:!1},h).show(),a.previous=e.find(c.previous).on("click",{isBack:!0},h).show();if(c.classMarkers){p=$("<ul />").addClass(c.classMarkers);for(b=d.length;b--;)p.prepend($('<li><a href="#" role="button">'+(b+1)+"</a></li>"));x=p.find("a").click(F);e.append(p);p.show()}D();G();C=setTimeout(r,c.delay)}};a.start=r;a.stop=v;a.change=h;a.transition=s;a.getTransitionX=u};