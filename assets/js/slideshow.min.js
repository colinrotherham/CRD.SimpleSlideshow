/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(Q,E){function t(){b.isManual||(F=setTimeout(function(){j()},b.interval))}function z(){clearTimeout(G);clearTimeout(F)}function H(a){j(a,{isPrev:!1})}function I(a){j(a,{isPrev:!0})}function j(f,J){var e=$(this),g;h=!(!J||!J.isPrev);if(!u&&(!f||f&&!e.hasClass(b.classDisabled))){if(e.hasClass(b.classSlide)){if(e.is("a"))return;g=c.index(e)}e=g;g=a.slide;var j=b.classSlide,m=a.number,k=c.length;"undefined"!==typeof e?(g=c.eq(e),m=e+1):(g=h?g.prev("."+j):g.next("."+j),m=h?m-1:m+
	1,g.length||(b.canLoop||(h=!h),g=h?c.eq(k-1):c.eq(0),m=h?k:1));a.slideNext=g;a.number=m;if(!a.slide.is(a.slideNext)||v)u=!0,K(),w(b.isCarousel?b.time:0,function(){L(f)}),z()}f?d.is(a.slide)||f.preventDefault():t()}function w(a,c,e){if(M&&b.isCarousel){e=e||0;if(c)k.one(l.toLowerCase()+"TransitionEnd transitionend",c);x[l+"Transition"]=a?a/1E3+"s":"";x[l+"Transform"]="translateX("+-1*(y(null,!0)-e)+"%)"}else k.animate({left:y()+"%"},a,c)}function L(f){c.removeClass(b.classActive);a.slideNext.addClass(b.classActive);
	a.slide=a.slideNext;u=!1;x[l+"Transition"]="";f&&"click"===f.type&&a.slide.focus();E&&E.call(a)}function y(b,d){b=0===b||b?b:a.number-1;return d?b*(100/c.length):-100*b}function N(c){r&&(c?j(c,{slide:A.index(this)}):A.removeAttr("class").eq(a.number-1).addClass(b.classActive))}function K(){if(!b.canLoop&&!v)switch(O.removeClass(b.classDisabled),a.number){case 1:B.addClass(b.classDisabled);break;case c.length:C.addClass(b.classDisabled)}N()}function P(b){n&&clearTimeout(n);n=setTimeout(function(){a.width=
	d.outerWidth()},b?300:0)}for(var a=this,p=["ms","O","Moz","Webkit",""],l=p[p.length],x,b={next:"button.next",previous:"button.previous",classStrip:"strip",classSlide:"slide",classActive:"sticky",classMarkers:"markers",classDisabled:"disabled",delay:3E3,interval:5E3,time:400,canLoop:!0,isManual:!0,isCarousel:!0},d,c,k,r,A,O,B,C,G,F,n,u,h,M,R=document.body.style,D=p.length;D--;)if("string"===typeof R[p[D]+"Transition"]){l=p[D];break}M=!!l;var v="ontouchstart"in window||window.DocumentTouch&&document instanceof
	DocumentTouch;$.each(Q,function(a,c){b[a]=c});a.element=d;a.strip=k;a.slides=c;a.init=function(){d=$(b.slideshow);c=d.find("."+b.classSlide);k=d.find("."+b.classStrip);if(d.length&&!(2>c.length)){x=k[0].style;a.slide=c.filter("."+b.classActive);a.number=c.index(a.slide)+1;a.slide.length||(a.number=1,a.slide=c.eq(a.number-1).addClass(b.classActive));v&&(b.canLoop=!1,b.isCarousel=!0);k.width(100*c.length+"%");c.width(100/c.length+"%");for(var f=c.length,l;f--;)l=y(f,!0)+"%",c.eq(f).css({left:l,display:"block"}).attr("tabindex",
	"-1");w(0);d.mouseenter(z).mouseleave(t);if(v){var e,g,p=function(b){var d=b.originalEvent,f=d.touches[0];if(!(1<f.length||d.scale&&1!==d.scale))if(e=f.pageX-n.x,g=f.pageY-n.y,"undefined"===typeof q&&(q=!!(q||Math.abs(e)<Math.abs(g))),!q){b.preventDefault();if((h=0<e?!0:!1)&&!(a.number-1)||!h&&a.number===c.length)e/=Math.abs(e)/a.width+1;w(0,void 0,e/a.width*(100/c.length))}},m=function(){q||(d.off("touchmove",s),d.off("touchend touchcancel",s),j(void 0,{isPrev:h}))},n,q,s="."+b.classStrip;d.on("touchstart",
	s,function(a){a=a.originalEvent.touches[0];u&&L();n={x:a.pageX,y:a.pageY,time:+new Date};q=g=e=void 0;d.on("touchmove",s,p);d.on("touchend touchcancel",s,m)});d.on("click",s,function(a){q||a.preventDefault()});$(window).resize(P)}else c.click(j),C=d.find(b.next).on("click",H).show(),B=d.find(b.previous).on("click",I).show(),O=B.add(C);if(b.classMarkers){r=$("<ul />").addClass(b.classMarkers);for(f=c.length;f--;)r.prepend($('<li><a href="#" role="button">'+(f+1)+"</a></li>"));A=r.find("a").click(N);
	d.append(r);r.show()}K();P();G=setTimeout(t,b.delay)}};a.start=t;a.stop=z;a.next=H;a.prev=I;a.transition=w;a.getTransitionX=y};