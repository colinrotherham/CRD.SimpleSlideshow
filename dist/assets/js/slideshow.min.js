var CRD=CRD||{};CRD.Slideshow=function(e,n,t){"use strict";function i(e){$.each(e,function(e,n){nn[e]=n}),V="undefined"!=typeof nn.isTouch?!!nn.isTouch:"ontouchstart"in window||navigator.msPointerEnabled||window.DocumentTouch&&document instanceof DocumentTouch}function o(e){function n(){var n,t,i;Z.viewportWidth=Math.floor(document.documentElement.clientWidth),nn.breakpoints&&($.each(nn.breakpoints,function(e,o){return o.range&&(n=o.range[0],t=o.range[1],Z.viewportWidth>=n&&(!t||Z.viewportWidth<=t))?void(i=e):void 0}),"undefined"!=typeof i&&(e||(Z.breakpoint=i),e&&nn.breakpoints[i].callback&&Z.breakpoint!==i&&(Z.breakpoint=i,P&&P.length&&nn.breakpoints[i].callback())))}I&&clearTimeout(I),I=l(n,e?300:0)}function s(e){function n(){Z.width=P.outerWidth()}R&&clearTimeout(R),R=l(n,e?300:0)}function a(){var e=P?!1:!0;if(e||(H=!1,f.call(this,void 0,{slide:0}),S.removeAttr("style"),W.removeAttr("style")),P=$(nn.slideshow),S=P.find("."+nn.classSlide),W=P.find("."+nn.classStrip),j=S.length,P.length&&!(2>j)){A=W[0].style;var n=S.first(),t=100/j+"%";W.outerWidth(100*j+"%"),S.outerWidth(t),n.width()&&n.get(0).style.width.slice(0,4)===t.slice(0,4)||S.width(t),B=nn.canLoop?Math.floor((j-1)/2):0,G=0,M(),T(),C(),e&&(D(),V&&L()),g(),Z.element=P,Z.strip=W,Z.slides=S,P.removeClass(nn.classDisabled)}}function r(){nn.isManual||(N=l(function(){f()},nn.interval))}function c(){clearTimeout(z),clearTimeout(N)}function l(e,n){return setTimeout(e,n||0)}function u(e){f.call(this,e,{isPrev:!1})}function d(e){f.call(this,e,{isPrev:!0})}function f(e,n){var i=Z.index,o=nn.isCarousel?nn.time:0;if(!H&&(Q=n&&n.isPrev,v.call(this,n&&n.slide),!Z.slide.is(Z.slideNext))){var s=t?t.call(Z,e):!0;(s||"undefined"==typeof s)&&(H=!0,c(),e&&"hashchange"===e.type&&(o=0),h(y(i),o,function(){p(e)}))}e?e.preventDefault():r()}function h(e,n,t,i){function o(){J=!1,e||0===e||(e=y(Z.index)),n=n||0,tn&&nn.isCarousel?(i=i||0,n&&t&&W.one(en.toLowerCase()+"TransitionEnd transitionend",t),A[en+"Transition"]=n?n/1e3+"s":"",A[en+"Transform"]="translateX("+-1*(b(e,!0)-i)+"%)",!n&&t&&t()):W.stop(!0,!0).animate({left:b(e)+"%"},n,t)}on&&"undefined"!=typeof i?(J=!0,U=requestAnimationFrame(o)):o()}function p(e){Z.slide=Z.slideNext,H=!1,S.removeClass(nn.classActive),Z.slide.addClass(nn.classActive),A[en+"Transition"]="",nn.canLoop&&C(),g(),e&&(("click"===e.type||"hashchange"===e.type)&&l(function(){Z.slide.focus()}),n&&n.call(Z,e))}function v(e){var n=$(this),t=Z.index,i=j-1,o=n.is(F)?nn.step:1;"undefined"!=typeof e?(Q=t>e?!0:!1,t=e):Q?(t-=o,t=0>=t?nn.canLoop?w(t):0:t):(t+=o,t=t>=i?nn.canLoop?w(t):i:t),Z.slideNext=S.eq(t),Z.index=t}function m(){return!nn.canLoop&&(Q&&0===Z.index||!Q&&Z.index===j-1)}function x(e){q&&(e?f.call(this,e,{slide:X.index(this)}):X.removeAttr("class").eq(Z.index).addClass(nn.classActive)),E&&E.html("<strong>"+(Z.index+1)+"</strong>/<strong>"+j+"</strong>")}function g(){var e,n=nn.classDisabled;if(!nn.canLoop){switch(F.removeClass(n),Z.index){case 0:e=O;break;case j-1:e=Y}e&&e.addClass(n)}x()}function b(e,n){return n?e*(100/j):-100*e}function w(e){return e>=j&&(e-=j),0>e&&(e=j+e),e}function y(e){return w(Z.index+(nn.canLoop?B-e:0))}function k(e){return w(nn.canLoop?e-B+Z.index:e)}function T(e){var n,t;Z.slide||(Z.slide=S.filter("."+nn.classActive).first(),Z.index=S.index(Z.slide)),location.hash&&(n=S.filter(location.hash),t=S.index(n),n.length&&Z.index!==t&&f(e,{slide:t})),Z.slide.length||(Z.index=0,Z.slide=S.eq(Z.index)),l(function(){P.scrollTop(0),P.scrollLeft(0)})}function C(){for(var e,n,t,i=j;i--;)e=S.eq(k(i)),n=e.data("x"),t=b(i,!0)+"%",t!==n&&e.css({left:t,display:nn.display}).attr("tabindex","-1").data("x",t);h(nn.canLoop?B:Z.index)}function M(){if(nn.markers){q=$(nn.markers);for(var e=j;e--;)q.prepend($("<button>"+(e+1)+"</button>"));X=q.find("button")}nn.numbers&&(E=$(nn.numbers).text("1/9"))}function D(){P.mouseenter(c).mouseleave(r),Y=$(nn.next).on("click touchend",u),O=$(nn.previous).on("click touchend",d),F=O.add(Y),z=l(r,nn.delay),nn.markers&&q.length&&q.on("click touchend","button",x),$(window).on("hashchange",T),s(),$(window).resize(s)}function L(){function e(e){var i=F||q&&q.add(F),a=e.originalEvent,c=a.touches&&a.touches[0]||a;i.has(e.target).length||i.is(e.target)||(H&&p(),o={x:c.pageX||c.screenX,y:c.pageY||c.screenY,time:+new Date},s={},K=void 0,P.on(r,n),P.on(l,t))}function n(e){var n=e.originalEvent,t=n.touches&&n.touches[0]||n;J||t.length>1||n.scale&&1!==n.scale||(s={x:(t.pageX||t.screenX)-o.x,y:(t.pageY||t.screenY)-o.y},"undefined"==typeof K&&(K=!!(K||Math.abs(s.x)<Math.abs(s.y))),K||(e.preventDefault(),c(),Q=s.x>0,H=!0,!nn.canLoop&&m()&&(s.x=s.x/(Math.abs(s.x)/Z.width+1)),h(null,null,null,s.x/Z.width*(100/j))))}function t(){if(!K){var e=+new Date-o.time,i=Math.abs(s.x),a=250>e&&i>20||i>Z.width/3;H=!1,on&&cancelAnimationFrame(U),a&&!m()?f.call(this,event,{isPrev:Q}):i>0&&h(null,nn.time)}P.off(r,n),P.off(l,t)}function i(e){!K&&H&&e.preventDefault()}var o,s,a="touchstart pointerdown MSPointerDown",r="touchmove pointermove MSPointerMove",l="touchend touchleave touchcancel MSPointerUp MSPointerOut MSPointerCancel pointerup pointerleave pointercancel";nn.isCarousel=!0,P.on(a,e).on("click",i).addClass(nn.classTouch)}var A,P,S,W,q,X,E,F,O,Y,z,N,R,I,U,j,B,G,H,J,K,Q,V,Z=this,_=["ms","O","Moz","Webkit",""],en="",nn={next:"button.next",previous:"button.previous",markers:".markers",numbers:".numbers",classStrip:"strip",classSlide:"slide",classActive:"sticky",classDisabled:"disabled",classTouch:"touch",step:1,delay:3e3,interval:5e3,time:400,display:"block",canLoop:!1,isManual:!0,isCarousel:!0,breakpoints:[]},tn=function(){for(var e=document.body.style,n=_.length;n--;)if("string"==typeof e[_[n]+"Transition"]){en=_[n];break}return!!en}(),on=function(){return!(!window.requestAnimationFrame||!window.cancelAnimationFrame)}();i(e||{}),$(window).resize(o),o(),Z.init=a,Z.start=r,Z.stop=c,Z.next=u,Z.prev=d,Z.change=f,Z.transition=h,Z.getTransitionX=b,Z.getIndexWrapped=w,Z.getIndexOffset=y,Z.getPositionOffset=k,Z.updateConfig=i};