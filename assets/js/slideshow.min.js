/*
	Copyright (c) 2014 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(da,L,M){function N(a){$.each(a,function(a,b){c[a]=b});O="undefined"!==typeof c.isTouch?!!c.isTouch:"ontouchstart"in window||navigator.msPointerEnabled||window.DocumentTouch&&document instanceof DocumentTouch}function x(){c.isManual||(P=s(function(){m()},c.interval))}function y(){clearTimeout(Q);clearTimeout(P)}function s(a,b){return setTimeout(a,b||0)}function R(a){m.call(this,a,{isPrev:!1})}function S(a){m.call(this,a,{isPrev:!0})}function m(a,e){var f=b.index,T=c.isCarousel?
	c.time:0;if(!n&&(p=e&&e.isPrev,ea.call(this,e&&e.slide),!b.slide.is(b.slideNext))){var d=M?M.call(b,a):!0;if(d||"undefined"===typeof d)n=!0,y(),a&&"hashchange"===a.type&&(T=0),t(C(f),T,function(){U(a)})}a?a.preventDefault():x()}function t(a,e,f,d){function g(){D=!1;a||0===a||(a=C(b.index));e=e||0;if(fa&&c.isCarousel){d=d||0;if(e&&f)l.one(k.toLowerCase()+"TransitionEnd transitionend",f);z[k+"Transition"]=e?e/1E3+"s":"";z[k+"Transform"]="translateX("+-1*(A(a,!0)-d)+"%)";!e&&f&&f()}else l.stop(!0,!0).animate({left:A(a)+
	"%"},e,f)}V&&"undefined"!==typeof d?(D=!0,W=requestAnimationFrame(g)):g()}function U(a){b.slide=b.slideNext;n=!1;h.removeClass(c.classActive);b.slide.addClass(c.classActive);z[k+"Transition"]="";c.canLoop&&X();Y();a&&("click"!==a.type&&"hashchange"!==a.type||s(function(){b.slide.focus()}),L&&L.call(b,a))}function ea(a){var e=$(this),f=b.index,g=d-1,e=e.is(u)?c.step:1;"undefined"!==typeof a?(p=a<f?!0:!1,f=a):p?(f-=e,f=0>=f?c.canLoop?v(f):0:f):(f+=e,f=f>=g?c.canLoop?v(f):g:f);b.slideNext=h.eq(f);b.index=
	f}function Z(){return!c.canLoop&&(p&&0===b.index||!p&&b.index===d-1)}function aa(a){r&&(a?m.call(this,a,{slide:E.index(this)}):E.removeAttr("class").eq(b.index).addClass(c.classActive));F&&F.html("<strong>"+(b.index+1)+"</strong>/<strong>"+d+"</strong>")}function Y(){var a,e=c.classDisabled;if(!c.canLoop){u.removeClass(e);switch(b.index){case 0:a=G;break;case d-1:a=H}a&&a.addClass(e)}aa()}function A(a,b){return b?100/d*a:-100*a}function v(a){a>=d&&(a-=d);0>a&&(a=d+a);return a}function C(a){return v(b.index+
	(c.canLoop?B-a:0))}function ba(a){return v(c.canLoop?a-B+b.index:a)}function ca(a){var e,f;b.slide||(b.slide=h.filter("."+c.classActive).first(),b.index=h.index(b.slide));location.hash&&(e=h.filter(location.hash),f=h.index(e),e.length&&b.index!==f&&m(a,{slide:f}));b.slide.length||(b.index=0,b.slide=h.eq(b.index));s(function(){g.scrollTop(0);g.scrollLeft(0)})}function X(){for(var a=d,e,f,g;a--;)e=h.eq(ba(a)),f=e.data("x"),g=A(a,!0)+"%",g!==f&&e.css({left:g,display:c.display}).attr("tabindex","-1").data("x",
	g);t(c.canLoop?B:b.index)}function ga(){var a,e;function f(f){var g=f.originalEvent,w=g.touches&&g.touches[0]||g;D||1<w.length||g.scale&&1!==g.scale||(a=(w.pageX||w.screenX)-k.x,e=(w.pageY||w.screenY)-k.y,"undefined"===typeof q&&(q=!!(q||Math.abs(a)<Math.abs(e))),q||(f.preventDefault(),y(),p=0<a,n=!0,!c.canLoop&&Z()&&(a/=Math.abs(a)/b.width+1),t(null,null,null,a/b.width*(100/d))))}function h(){if(!q){var e=+new Date-k.time,d=Math.abs(a),e=250>e&&20<d||d>b.width/3;n=!1;V&&cancelAnimationFrame(W);e&&
	!Z()?m.call(this,event,{isPrev:p}):0<d&&t(null,c.time)}g.off("touchmove pointermove MSPointerMove",f);g.off("touchend touchleave touchcancel MSPointerUp MSPointerOut MSPointerCancel pointerup pointerleave pointercancel",h)}function l(a){I&&clearTimeout(I);I=s(function(){var e,f,d;b.width=g.outerWidth();b.viewportWidth=Math.floor(document.documentElement.clientWidth);c.breakpoints&&($.each(c.breakpoints,function(a,c){c.range&&(e=c.range[0],f=c.range[1],b.viewportWidth>=e&&(!f||b.viewportWidth<=f)&&
	(d=a))}),"undefined"!==typeof d&&(a||(J=d),a&&c.breakpoints[d].callback&&J!==d&&(J=d,c.breakpoints[d].callback())))},a?300:0)}var k;c.isCarousel=!0;g.on("touchstart pointerdown MSPointerDown",function(b){var c=u||r&&r.add(u),d=b.originalEvent,d=d.touches&&d.touches[0]||d;c.has(b.target).length||c.is(b.target)||(n&&U(),k={x:d.pageX||d.screenX,y:d.pageY||d.screenY,time:+new Date},q=e=a=void 0,g.on("touchmove pointermove MSPointerMove",f),g.on("touchend touchleave touchcancel MSPointerUp MSPointerOut MSPointerCancel pointerup pointerleave pointercancel",
	h))}).on("click",function(a){!q&&n&&a.preventDefault()}).addClass(c.classTouch);l();$(window).resize(l)}var b=this,K=["ms","O","Moz","Webkit",""],k="",z,c={next:"button.next",previous:"button.previous",markers:".markers",numbers:".numbers",classStrip:"strip",classSlide:"slide",classActive:"sticky",classDisabled:"disabled",classTouch:"touch",step:1,delay:3E3,interval:5E3,time:400,display:"block",canLoop:!1,isManual:!0,isCarousel:!0,breakpoints:[]},g,h,l,r,E,F,u,G,H,Q,P,I,W,J,d,B,n,D,q,p,O,fa=function(){for(var a=
	document.body.style,b=K.length;b--;)if("string"===typeof a[K[b]+"Transition"]){k=K[b];break}return!!k}(),V=!(!window.requestAnimationFrame||!window.cancelAnimationFrame);N(da||{});b.init=function(){g=$(c.slideshow);h=g.find("."+c.classSlide);l=g.find("."+c.classStrip);d=h.length;if(g.length&&!(2>d)){z=l[0].style;var a=h.first(),e=100/d+"%";l.outerWidth(100*d+"%");h.outerWidth(e);a.width()&&a.get(0).style.width.slice(0,4)===e.slice(0,4)||h.width(e);B=c.canLoop?Math.floor((d-1)/2):0;g.mouseenter(y).mouseleave(x);
	H=$(c.next).on("click touchend",R);G=$(c.previous).on("click touchend",S);u=G.add(H);Q=s(x,c.delay);if(c.markers){r=$(c.markers).on("click touchend","button",aa);for(a=d;a--;)r.prepend($("<button>"+(a+1)+"</button>"));E=r.find("button")}c.numbers&&(F=$(c.numbers).text("1/9"));ca();X();O&&ga();Y();b.element=g;b.strip=l;b.slides=h;g.removeClass(c.classDisabled);$(window).on("hashchange",ca)}};b.start=x;b.stop=y;b.next=R;b.prev=S;b.change=m;b.transition=t;b.getTransitionX=A;b.getIndexWrapped=v;b.getIndexOffset=
	C;b.getPositionOffset=ba;b.updateConfig=N};