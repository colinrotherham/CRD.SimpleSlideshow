/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};

	CRD.Slideshow=function(A,w){function m(){c.isManual||(x=setTimeout(function(){e()},c.interval))}function n(){clearTimeout(y);clearTimeout(x)}function e(b,d){j=!(!b||!b.data||!b.data.isBack);var f=$(this);if(!p&&(!b||b&&!f.hasClass(c.classDisabled))){if(f.hasClass(c.classSlide)){if(f.is("a"))return;d=a.slides.index(f)}var f=d,g=a.slide,e=a.slides,h=c.classSlide,l=a.slideNumber,k=e.length;"undefined"!==typeof f?(g=e.eq(f),l=f+1):(g=j?g.prev("."+h):g.next("."+h),l=j?l-1:l+1,g.length||(c.canLoop||(j=
	!j),g=j?e.eq(k-1):e.eq(0),l=j?k:1));a.slideNext=g;a.slideNumber=l;a.slide.is(a.slideNext)||(p=!0,z(),q(),r(c.isCarousel?c.time:0,function(){a.slides.removeClass(c.classActive);a.slideNext.addClass(c.classActive);a.slide=a.slideNext;p=!1;b&&"click"===b.type&&a.slide.focus();w&&w.call(a)}),n())}b?b.preventDefault():m()}function r(b,d){a.strip.animate({left:s()+"%"},c.isCSS?0:b);d&&setTimeout(d,b)}function s(b,c){b="undefined"!==typeof b?b:a.slideNumber-1;return c?b*(100/a.slides.length):-100*b}function q(b){if(h){var d=
	a.slideNumber-1;b?e(b,t.index(this)):t.removeAttr("class").eq(d).addClass(c.classActive)}}function z(){if(!c.canLoop)switch(a.previous.add(a.next).removeClass(c.classDisabled),a.slideNumber){case 1:a.previous.addClass(c.classDisabled);break;case a.slides.length:a.next.addClass(c.classDisabled)}}for(var a=this,k=["o","ms","Moz","webkit",""],u=k[0],B=document.body.style,v=k.length;v--;)"string"===typeof B[k[v]+"Transition"]&&(u=k[v]);var c={next:"button.next",previous:"button.previous",classStrip:"strip",
	classSlide:"slide",classActive:"sticky",classMarkers:"markers",classDisabled:"disabled",delay:3E3,interval:5E3,time:600,canLoop:!0,isManual:!1,isCarousel:!0,isCSS:!!u},h,t,y,x,p=!1,j=!1;$.each(A,function(a,d){c[a]=d});a.init=function(){var b=$(c.slideshow);a.strip=b.find("."+c.classStrip);a.slides=b.find("."+c.classSlide);if(b.length&&!(2>a.slides.length)){a.next=b.find(c.next).show();a.previous=b.find(c.previous).show();a.strip.width(100*a.slides.length+"%");a.slides.width(100/a.slides.length+"%");
	a.slide=a.slides.filter("."+c.classActive);a.slideNumber=a.slides.index(a.slide)+1;a.slide.length||(a.slideNumber=1,a.slide=a.slides.eq(a.slideNumber-1).addClass(c.classActive));a.element=b;z();for(var b=a.slides.length,d;b--;)d=s(b,!0)+"%",a.slides.eq(b).css({left:d,display:"block"}).attr("tabindex","-1");r(0);if(c.isCSS){var f=a.strip.get(0).style,g="left "+c.time/1E3+"s";setTimeout(function(){f[u+"Transition"]=g},0)}a.next.on("click",{isBack:!1},e);a.previous.on("click",{isBack:!0},e);a.slides.click(e);
	a.element.mouseenter(n).mouseleave(m);if(c.classMarkers){h=$("<ul />").addClass(c.classMarkers);for(b=a.slides.length;b--;)h.prepend($('<li><a href="#" role="button">'+(b+1)+"</a></li>"));t=h.find("a").click(q);a.element.append(h);q();h.show()}y=setTimeout(m,c.delay)}};a.start=m;a.stop=n;a.change=e;a.transition=r;a.getTransitionX=s};