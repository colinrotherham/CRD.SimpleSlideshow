/*
	Copyright (c) 2015 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(ea,L,M){function N(a){$.each(a,function(a,b){c[a]=b});O="undefined"!==typeof c.isTouch?!!c.isTouch:"ontouchstart"in window||navigator.msPointerEnabled||window.DocumentTouch&&document instanceof DocumentTouch}function P(a){C&&clearTimeout(C);C=s(function(){var d,e,f;b.viewportWidth=Math.floor(document.documentElement.clientWidth);c.breakpoints&&($.each(c.breakpoints,function(a,c){c.range&&(d=c.range[0],e=c.range[1],b.viewportWidth>=d&&(!e||b.viewportWidth<=e)&&(f=a))}),"undefined"!==
	typeof f&&(a||(b.breakpoint=f),a&&c.breakpoints[f].callback&&b.breakpoint!==f&&(b.breakpoint=f,g&&g.length&&c.breakpoints[f].callback())))},a?300:0)}function Q(a){D&&clearTimeout(D);D=s(function(){b.width=g.outerWidth()},a?300:0)}function x(){c.isManual||(R=s(function(){l()},c.interval))}function y(){clearTimeout(S);clearTimeout(R)}function s(a,b){return setTimeout(a,b||0)}function T(a){l.call(this,a,{isPrev:!1})}function U(a){l.call(this,a,{isPrev:!0})}function l(a,d){var e=b.index,f=c.isCarousel?
	c.time:0;if(!m&&(p=d&&d.isPrev,fa.call(this,d&&d.slide),!b.slide.is(b.slideNext))){var g=M?M.call(b,a):!0;if(g||"undefined"===typeof g)m=!0,y(),a&&"hashchange"===a.type&&(f=0),u(E(e),f,function(){V(a)})}a?a.preventDefault():x()}function u(a,d,e,f){function g(){F=!1;a||0===a||(a=E(b.index));d=d||0;if(ga&&c.isCarousel){f=f||0;if(d&&e)q.one(t.toLowerCase()+"TransitionEnd transitionend",e);z[t+"Transition"]=d?d/1E3+"s":"";z[t+"Transform"]="translateX("+-1*(A(a,!0)-f)+"%)";!d&&e&&e()}else q.stop(!0,!0).animate({left:A(a)+
	"%"},d,e)}W&&"undefined"!==typeof f?(F=!0,X=requestAnimationFrame(g)):g()}function V(a){b.slide=b.slideNext;m=!1;k.removeClass(c.classActive);b.slide.addClass(c.classActive);z[t+"Transition"]="";c.canLoop&&Y();Z();a&&("click"!==a.type&&"hashchange"!==a.type||s(function(){b.slide.focus()}),L&&L.call(b,a))}function fa(a){var d=$(this),e=b.index,f=h-1,d=d.is(v)?c.step:1;"undefined"!==typeof a?(p=a<e?!0:!1,e=a):p?(e-=d,e=0>=e?c.canLoop?w(e):0:e):(e+=d,e=e>=f?c.canLoop?w(e):f:e);b.slideNext=k.eq(e);b.index=
	e}function aa(){return!c.canLoop&&(p&&0===b.index||!p&&b.index===h-1)}function ba(a){n&&(a?l.call(this,a,{slide:G.index(this)}):G.removeAttr("class").eq(b.index).addClass(c.classActive));H&&H.html("<strong>"+(b.index+1)+"</strong>/<strong>"+h+"</strong>")}function Z(){var a,d=c.classDisabled;if(!c.canLoop){v.removeClass(d);switch(b.index){case 0:a=I;break;case h-1:a=J}a&&a.addClass(d)}ba()}function A(a,b){return b?100/h*a:-100*a}function w(a){a>=h&&(a-=h);0>a&&(a=h+a);return a}function E(a){return w(b.index+
	(c.canLoop?B-a:0))}function ca(a){return w(c.canLoop?a-B+b.index:a)}function da(a){var d,e;b.slide||(b.slide=k.filter("."+c.classActive).first(),b.index=k.index(b.slide));location.hash&&(d=k.filter(location.hash),e=k.index(d),d.length&&b.index!==e&&l(a,{slide:e}));b.slide.length||(b.index=0,b.slide=k.eq(b.index));s(function(){g.scrollTop(0);g.scrollLeft(0)})}function Y(){for(var a=h,d,e,f;a--;)d=k.eq(ca(a)),e=d.data("x"),f=A(a,!0)+"%",f!==e&&d.css({left:f,display:c.display}).attr("tabindex","-1").data("x",
	f);u(c.canLoop?B:b.index)}function ha(){var a,d;function e(e){var f=e.originalEvent,g=f.touches&&f.touches[0]||f;F||1<g.length||f.scale&&1!==f.scale||(a=(g.pageX||g.screenX)-k.x,d=(g.pageY||g.screenY)-k.y,"undefined"===typeof r&&(r=!!(r||Math.abs(a)<Math.abs(d))),r||(e.preventDefault(),y(),p=0<a,m=!0,!c.canLoop&&aa()&&(a/=Math.abs(a)/b.width+1),u(null,null,null,a/b.width*(100/h))))}function f(){if(!r){var d=+new Date-k.time,h=Math.abs(a),d=250>d&&20<h||h>b.width/3;m=!1;W&&cancelAnimationFrame(X);
	d&&!aa()?l.call(this,event,{isPrev:p}):0<h&&u(null,c.time)}g.off("touchmove pointermove MSPointerMove",e);g.off("touchend touchleave touchcancel MSPointerUp MSPointerOut MSPointerCancel pointerup pointerleave pointercancel",f)}var k;c.isCarousel=!0;g.on("touchstart pointerdown MSPointerDown",function(b){var c=v||n&&n.add(v),h=b.originalEvent,h=h.touches&&h.touches[0]||h;c.has(b.target).length||c.is(b.target)||(m&&V(),k={x:h.pageX||h.screenX,y:h.pageY||h.screenY,time:+new Date},r=d=a=void 0,g.on("touchmove pointermove MSPointerMove",
	e),g.on("touchend touchleave touchcancel MSPointerUp MSPointerOut MSPointerCancel pointerup pointerleave pointercancel",f))}).on("click",function(a){!r&&m&&a.preventDefault()}).addClass(c.classTouch)}var b=this,K=["ms","O","Moz","Webkit",""],t="",z,c={next:"button.next",previous:"button.previous",markers:".markers",numbers:".numbers",classStrip:"strip",classSlide:"slide",classActive:"sticky",classDisabled:"disabled",classTouch:"touch",step:1,delay:3E3,interval:5E3,time:400,display:"block",canLoop:!1,
	isManual:!0,isCarousel:!0,breakpoints:[]},g,k,q,n,G,H,v,I,J,S,R,D,C,X,h,B,m,F,r,p,O,ga=function(){for(var a=document.body.style,b=K.length;b--;)if("string"===typeof a[K[b]+"Transition"]){t=K[b];break}return!!t}(),W=!(!window.requestAnimationFrame||!window.cancelAnimationFrame);N(ea||{});$(window).resize(P);P();b.init=function(){var a=g?!1:!0;a||(m=!1,l.call(this,void 0,{slide:0}),k.removeAttr("style"),q.removeAttr("style"));g=$(c.slideshow);k=g.find("."+c.classSlide);q=g.find("."+c.classStrip);h=
	k.length;if(g.length&&!(2>h)){z=q[0].style;var d=k.first(),e=100/h+"%";q.outerWidth(100*h+"%");k.outerWidth(e);d.width()&&d.get(0).style.width.slice(0,4)===e.slice(0,4)||k.width(e);B=c.canLoop?Math.floor((h-1)/2):0;if(c.markers){n=$(c.markers);for(d=h;d--;)n.prepend($("<button>"+(d+1)+"</button>"));G=n.find("button")}c.numbers&&(H=$(c.numbers).text("1/9"));da();Y();if(a){g.mouseenter(y).mouseleave(x);J=$(c.next).on("click touchend",T);I=$(c.previous).on("click touchend",U);v=I.add(J);S=s(x,c.delay);
	if(c.markers&&n.length)n.on("click touchend","button",ba);$(window).on("hashchange",da);Q();$(window).resize(Q);O&&ha()}Z();b.element=g;b.strip=q;b.slides=k;g.removeClass(c.classDisabled)}};b.start=x;b.stop=y;b.next=T;b.prev=U;b.change=l;b.transition=u;b.getTransitionX=A;b.getIndexWrapped=w;b.getIndexOffset=E;b.getPositionOffset=ca;b.updateConfig=N};