/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(Y,K,L){function M(a){$.each(a,function(a,b){c[a]=b});N="undefined"!==typeof c.isTouch?!!c.isTouch:"ontouchstart"in window||navigator.msPointerEnabled||window.DocumentTouch&&document instanceof DocumentTouch}function O(){var a=b.slide;Z();a!==b.slide&&w(function(){f.scrollTop(0);f.scrollLeft(0)})}function n(){c.isManual||(P=w(function(){s()},c.interval))}function y(){clearTimeout(Q);clearTimeout(P)}function w(a,b){return setTimeout(a,b||0)}function R(a){s.call(this,a,{isPrev:!1})}
	function S(a){s.call(this,a,{isPrev:!0})}function s(a,e){var d=b.index;if(!p&&(q=e&&e.isPrev,aa.call(this,e&&e.slide),!b.slide.is(b.slideNext))){p=!0;y();var t=L?L.call(b,a):!0;(t||"undefined"===typeof t)&&u(D(d),c.isCarousel?c.time:0,function(){z(a)})}a?a.preventDefault():n()}function u(a,e,d,t){function f(){E=!1;a||0===a||(a=D(b.index));e=e||0;if(ba&&c.isCarousel){t=t||0;if(e&&d)l.one(k.toLowerCase()+"TransitionEnd transitionend",d);A[k+"Transition"]=e?e/1E3+"s":"";A[k+"Transform"]="translateX("+
	-1*(B(a,!0)-t)+"%)";!e&&d&&d()}else l.stop(!0,!0).animate({left:B(a)+"%"},e,d)}window.requestAnimationFrame?requestAnimationFrame(f):f()}function z(a){b.slide=b.slideNext;p=!1;h.removeClass(c.classActive);b.slide.addClass(c.classActive);A[k+"Transition"]="";c.canLoop&&T();U();a&&("click"===a.type&&w(function(){b.slide.focus()}),K&&K.call(b,a))}function aa(a){var e=$(this),d=b.index,f=g-1,e=e.is(x)?c.step:1;"undefined"!==typeof a?(q=a<d?!0:!1,d=a):q?(d-=e,d=0>=d?c.canLoop?m(d):0:d):(d+=e,d=d>=f?c.canLoop?
	m(d):f:d);b.slideNext=h.eq(d);b.index=d}function V(){return!c.canLoop&&(q&&0===b.index||!q&&b.index===g-1)}function W(a){v&&(a?s.call(this,a,{slide:F.index(this)}):F.removeAttr("class").eq(b.index).addClass(c.classActive))}function U(){var a,e=c.classDisabled;if(!c.canLoop){x.removeClass(e);switch(b.index){case 0:a=G;break;case g-1:a=H}a&&a.addClass(e)}W()}function B(a,b){return b?100/g*a:-100*a}function m(a){a>=g&&(a-=g);0>a&&(a=g+a);return a}function D(a){return m(b.index+(c.canLoop?C-a:0))}function X(a){return m(c.canLoop?
	a-C+b.index:a)}function Z(){var a;b.slide=h.filter("."+c.classActive).first();b.index=h.index(b.slide);location.hash&&(a=h.filter(location.hash),a.length&&(b.slideNext=a,b.index=h.index(a),u(b.index,0,z),z()));b.slide.length||(b.index=0,b.slide=h.eq(b.index))}function T(){for(var a=g,e,d,f;a--;)e=h.eq(X(a)),d=e.data("x"),f=B(a,!0)+"%",f!==d&&e.css({left:f,display:c.display}).attr("tabindex","-1").data("x",f);u(c.canLoop?C:b.index)}function ca(){var a,e;function d(d){var f=d.originalEvent,h=f.touches&&
	f.touches[0]||f;E||1<h.length||f.scale&&1!==f.scale||(a=(h.pageX||h.screenX)-k.x,e=(h.pageY||h.screenY)-k.y,"undefined"===typeof r&&(r=!!(r||Math.abs(a)<Math.abs(e))),r||(d.preventDefault(),y(),q=0<a,E=p=!0,!c.canLoop&&V()&&(a/=Math.abs(a)/b.width+1),u(null,null,null,a/b.width*(100/g))))}function h(){if(!r){var e=+new Date-k.time,g=Math.abs(a),e=250>e&&20<g||g>b.width/3;p=!1;e&&!V()?s.call(this,event,{isPrev:q}):0<g&&u(null,c.time)}f.off(m,d);f.off(n,h)}function l(a){I&&clearTimeout(I);I=w(function(){b.width=
	f.outerWidth()},a?300:0)}var k,m="touchmove pointermove MSPointerMove",n="touchend touchleave touchcancel MSPointerUp MSPointerOut MSPointerCancel pointerup pointerleave pointercancel";c.isCarousel=!0;f.on("touchstart pointerdown MSPointerDown",function(b){var c=x||v&&v.add(x),g=b.originalEvent,g=g.touches&&g.touches[0]||g;c.has(b.target).length||c.is(b.target)||(p&&z(),k={x:g.pageX||g.screenX,y:g.pageY||g.screenY,time:+new Date},r=e=a=void 0,f.on(m,d),f.on(n,h))}).on("click",function(a){!r&&p&&a.preventDefault()}).addClass(c.classTouch);
	l();$(window).resize(l)}var b=this,J=["ms","O","Moz","Webkit",""],k="",A,c={next:"button.next",previous:"button.previous",markers:".markers",classStrip:"strip",classSlide:"slide",classActive:"sticky",classDisabled:"disabled",classTouch:"touch",step:1,delay:3E3,interval:5E3,time:400,display:"block",canLoop:!1,isManual:!0,isCarousel:!0},f,h,l,v,F,x,G,H,Q,P,I,g,C,p,E,r,q,N,ba=function(){for(var a=document.body.style,b=J.length;b--;)if("string"===typeof a[J[b]+"Transition"]){k=J[b];break}return!!k}();
	M(Y||{});b.init=function(){f=$(c.slideshow);h=f.find("."+c.classSlide);l=f.find("."+c.classStrip);g=h.length;if(f.length&&!(2>g)){A=l[0].style;l.outerWidth(100*g+"%");h.outerWidth(100/g+"%");C=c.canLoop?Math.floor((g-1)/2):0;f.mouseenter(y).mouseleave(n);H=$(c.next).on("click touchend",R);G=$(c.previous).on("click touchend",S);x=G.add(H);Q=w(n,c.delay);if(c.markers){v=$(c.markers).on("click touchend","button",W);for(var a=g;a--;)v.prepend($("<button>"+(a+1)+"</button>"));F=v.find("button")}N&&ca();
	$(window).on("hashchange",O);O();U();T();b.element=f;b.strip=l;b.slides=h;f.removeClass(c.classDisabled)}};b.start=n;b.stop=y;b.next=R;b.prev=S;b.change=s;b.transition=u;b.getTransitionX=B;b.getIndexWrapped=m;b.getIndexOffset=D;b.getPositionOffset=X;b.updateConfig=M};