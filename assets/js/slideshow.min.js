/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(X,J,K){function L(a){$.each(a,function(a,b){c[a]=b});M="undefined"!==typeof c.isTouch?!!c.isTouch:"ontouchstart"in window||navigator.msPointerEnabled||window.DocumentTouch&&document instanceof DocumentTouch}function N(a){a=b.slide;Y();a!==b.slide&&setTimeout(function(){f.scrollTop(0);f.scrollLeft(0)},0)}function n(){c.isManual||(O=setTimeout(function(){s()},c.interval))}function x(){clearTimeout(P);clearTimeout(O)}function Q(a){s.call(this,a,{isPrev:!1})}function R(a){s.call(this,a,
	{isPrev:!0})}function s(a,e){var d=b.index;if(!p&&(q=e&&e.isPrev,Z.call(this,e&&e.slide),!b.slide.is(b.slideNext))){p=!0;x();var t=K?K.call(b,a):!0;(t||"undefined"===typeof t)&&u(C(d),c.isCarousel?c.time:0,function(){y(a)})}a?a.preventDefault():n()}function u(a,e,d,t){function f(){D=!1;a||0===a||(a=C(b.index));e=e||0;if(aa&&c.isCarousel){t=t||0;if(e&&d)l.one(k.toLowerCase()+"TransitionEnd transitionend",d);z[k+"Transition"]=e?e/1E3+"s":"";z[k+"Transform"]="translateX("+-1*(A(a,!0)-t)+"%)";!e&&d&&
	d()}else l.stop(!0,!0).animate({left:A(a)+"%"},e,d)}window.requestAnimationFrame?requestAnimationFrame(f):f()}function y(a){b.slide=b.slideNext;p=!1;h.removeClass(c.classActive);b.slide.addClass(c.classActive);z[k+"Transition"]="";c.canLoop&&S();T();a&&("click"===a.type&&setTimeout(function(){b.slide.focus()},0),J&&J.call(b,a))}function Z(a){var e=$(this),d=b.index,f=g-1,e=e.is(w)?c.step:1;"undefined"!==typeof a?(q=a<d?!0:!1,d=a):q?(d-=e,d=0>=d?c.canLoop?m(d):0:d):(d+=e,d=d>=f?c.canLoop?m(d):f:d);
	b.slideNext=h.eq(d);b.index=d}function U(){return!c.canLoop&&(q&&0===b.index||!q&&b.index===g-1)}function V(a){v&&(a?s.call(this,a,{slide:E.index(this)}):E.removeAttr("class").eq(b.index).addClass(c.classActive))}function T(){var a,e=c.classDisabled;if(!c.canLoop){w.removeClass(e);switch(b.index){case 0:a=F;break;case g-1:a=G}a&&a.addClass(e)}V()}function A(a,b){return b?100/g*a:-100*a}function m(a){a>=g&&(a-=g);0>a&&(a=g+a);return a}function C(a){return m(b.index+(c.canLoop?B-a:0))}function W(a){return m(c.canLoop?
	a-B+b.index:a)}function Y(){var a;b.slide=h.filter("."+c.classActive).first();b.index=h.index(b.slide);location.hash&&(a=h.filter(location.hash),a.length&&(b.slideNext=a,b.index=h.index(a),u(b.index,0,y),y()));b.slide.length||(b.index=0,b.slide=h.eq(b.index))}function S(){for(var a=g,e,d,f;a--;)e=h.eq(W(a)),d=e.data("x"),f=A(a,!0)+"%",f!==d&&e.css({left:f,display:c.display}).attr("tabindex","-1").data("x",f);u(c.canLoop?B:b.index)}function ba(){var a,e;function d(d){var f=d.originalEvent,h=f.touches&&
	f.touches[0]||f;D||1<h.length||f.scale&&1!==f.scale||(a=(h.pageX||h.screenX)-k.x,e=(h.pageY||h.screenY)-k.y,"undefined"===typeof r&&(r=!!(r||Math.abs(a)<Math.abs(e))),r||(d.preventDefault(),x(),q=0<a,D=p=!0,!c.canLoop&&U()&&(a/=Math.abs(a)/b.width+1),u(null,null,null,a/b.width*(100/g))))}function h(){if(!r){var e=+new Date-k.time,g=Math.abs(a),e=250>e&&20<g||g>b.width/3;p=!1;e&&!U()?s.call(this,event,{isPrev:q}):0<g&&u(null,c.time)}f.off(m,d);f.off(n,h)}function l(a){H&&clearTimeout(H);H=setTimeout(function(){b.width=
	f.outerWidth()},a?300:0)}var k,m="touchmove pointermove MSPointerMove",n="touchend touchleave touchcancel MSPointerUp MSPointerOut MSPointerCancel pointerup pointerleave pointercancel";c.isCarousel=!0;f.on("touchstart pointerdown MSPointerDown",function(b){var c=w||v&&v.add(w),g=b.originalEvent,g=g.touches&&g.touches[0]||g;c.has(b.target).length||c.is(b.target)||(p&&y(),k={x:g.pageX||g.screenX,y:g.pageY||g.screenY,time:+new Date},r=e=a=void 0,f.on(m,d),f.on(n,h))}).on("click",function(a){!r&&p&&a.preventDefault()}).addClass(c.classTouch);
	l();$(window).resize(l)}var b=this,I=["ms","O","Moz","Webkit",""],k="",z,c={next:"button.next",previous:"button.previous",markers:".markers",classStrip:"strip",classSlide:"slide",classActive:"sticky",classDisabled:"disabled",classTouch:"touch",step:1,delay:3E3,interval:5E3,time:400,display:"block",canLoop:!1,isManual:!0,isCarousel:!0},f,h,l,v,E,w,F,G,P,O,H,g,B,p,D,r,q,M,aa=function(){for(var a=document.body.style,b=I.length;b--;)if("string"===typeof a[I[b]+"Transition"]){k=I[b];break}return!!k}();
	L(X||{});b.init=function(){f=$(c.slideshow);h=f.find("."+c.classSlide);l=f.find("."+c.classStrip);g=h.length;if(f.length&&!(2>g)){z=l[0].style;l.outerWidth(100*g+"%");h.outerWidth(100/g+"%");B=c.canLoop?Math.floor((g-1)/2):0;f.mouseenter(x).mouseleave(n);G=$(c.next).on("click touchend",Q);F=$(c.previous).on("click touchend",R);w=F.add(G);P=setTimeout(n,c.delay);if(c.markers){v=$(c.markers).on("click touchend","button",V);for(var a=g;a--;)v.prepend($("<button>"+(a+1)+"</button>"));E=v.find("button")}M&&
	ba();$(window).on("hashchange",N);N();T();S();b.element=f;b.strip=l;b.slides=h;f.removeClass(c.classDisabled)}};b.start=n;b.stop=x;b.next=Q;b.prev=R;b.change=s;b.transition=u;b.getTransitionX=A;b.getIndexWrapped=m;b.getIndexOffset=C;b.getPositionOffset=W;b.updateConfig=L};