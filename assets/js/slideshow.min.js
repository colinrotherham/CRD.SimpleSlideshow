/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};CRD.Slideshow=function(B,w){function p(){c.isManual||(x=setTimeout(function(){g()},c.interval))}function r(){clearTimeout(y);clearTimeout(x)}function g(b,d){h=!(!b||!b.data||!b.data.isBack);var m=$(this);if(!s&&(!b||b&&!m.hasClass(c.classDisabled))){if(m.hasClass(c.classSlide)){if(m.is("a"))return;d=a.slides.index(m)}var g=d,j=a.slide,e=a.slides,f=c.classSlide,l=a.number,k=e.length;"undefined"!==typeof g?(j=e.eq(g),l=g+1):(j=h?j.prev("."+f):j.next("."+f),l=h?l-1:l+1,j.length||(c.canLoop||(h=!h),j=h?e.eq(k-1):e.eq(0),l=h?k:1));a.slideNext=j;a.number=l;a.slide.is(a.slideNext)||(s=!0,z(),t(c.isCarousel?c.time:0,function(){a.slides.removeClass(c.classActive);a.slideNext.addClass(c.classActive);a.slide=a.slideNext;s=!1;q[n+"Transition"]="";b&&"click"===b.type&&a.slide.focus();w&&w.call(a)}),r())}b?m.is(a.slide)||b.preventDefault():p()}function t(b,d){c.isCSS?(q[n+"Transition"]=b?b/1E3+"s":"",q[n+"Transform"]="translateX(-"+k(null,!0)+"%)"):a.strip.animate({left:k()+"%"},b);d&&setTimeout(d,b)}function k(b,c){b=0===b||b?b:a.number-1;return c?b*(100/a.slides.length):-100*b}function A(b){e&&(b?g(b,u.index(this)):u.removeAttr("class").eq(a.number-1).addClass(c.classActive))}function z(){if(!c.canLoop)switch(a.previous.add(a.next).removeClass(c.classDisabled),a.number){case 1:a.previous.addClass(c.classDisabled);break;case a.slides.length:a.next.addClass(c.classDisabled)}A()}for(var a=this,f=["ms","O","Moz","Webkit",""],n=f[f.length],C=document.body.style,v=f.length;v--;)"string"===typeof C[f[v]+"Transition"]&&(n=f[v]);var c={next:"button.next",previous:"button.previous",classStrip:"strip",classSlide:"slide",classActive:"sticky",classMarkers:"markers",classDisabled:"disabled",delay:3E3,interval:5E3,time:600,canLoop:!0,isManual:!0,isCarousel:!0,isCSS:!!n},e,u,y,x,s,h,q;$.each(B,function(a,d){c[a]=d});a.init=function(){var b=$(c.slideshow),d=b.find("."+c.classSlide),f=b.find("."+c.classStrip);if(b.length&&!(2>d.length)){a.slide=d.filter("."+c.classActive);a.number=d.index(a.slide)+1;a.slide.length||(a.number=1,a.slide=d.eq(a.number-1).addClass(c.classActive));a.element=b;a.strip=f;a.slides=d;a.next=b.find(c.next).show();a.previous=b.find(c.previous).show();q=f[0].style;a.strip.width(100*a.slides.length+"%");a.slides.width(100/a.slides.length+"%");for(b=a.slides.length;b--;)d=k(b,!0)+"%",a.slides.eq(b).css({left:d,display:"block"}).attr("tabindex","-1");t(0);a.next.on("click",{isBack:!1},g);a.previous.on("click",{isBack:!0},g);a.slides.click(g);a.element.mouseenter(r).mouseleave(p);if(c.classMarkers){e=$("<ul />").addClass(c.classMarkers);for(b=a.slides.length;b--;)e.prepend($('<li><a href="#" role="button">'+(b+1)+"</a></li>"));u=e.find("a").click(A);a.element.append(e);e.show()}z();y=setTimeout(p,c.delay)}};a.start=p;a.stop=r;a.change=g;a.transition=t;a.getTransitionX=k};