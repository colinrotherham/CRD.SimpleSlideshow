/*
	Copyright (c) 2012 Colin Rotherham, http://colinr.com
	https://github.com/colinrotherham
*/

	var CRD=CRD||{};
	CRD.Slideshow=function(R,G){function w(){b.isManual||(H=setTimeout(function(){l()},b.interval))}function x(){clearTimeout(I);clearTimeout(H)}function J(a){l(a,{isPrev:!1})}function K(a){l(a,{isPrev:!0})}function l(e,n){var c=$(this),d=n&&n.slide;j=n&&n.isPrev;if(!v&&(!e||e&&!c.hasClass(b.classDisabled))){if(c.hasClass(b.classSlide)){if(c.is("a"))return;d=f.index(c)}var h=a.slide,g=a.number,l=b.classSlide;"undefined"!==typeof d?(j=d<g?!0:!1,h=f.eq(d),g=d+1):(h=j?h.prev("."+l):h.next("."+l),g=j?g-1:
	g+1,h.length||(b.canLoop||(j=!j),h=j?f.eq(k-1):f.eq(0),g=j?k:1));a.slideNext=h;a.number=g;a.slide.is(a.slideNext)||(v=!0,x(),L(),r(b.isCarousel?b.time:0,function(){M(e)}))}e?c.is(a.slide)||e.preventDefault():w()}function r(e,c,l){var d;if(b.canLoop&&e){d=a.number;var h,g;!j&&1===d?(d=k+1,h=f.eq(0)):j&&d===k&&(d=0,h=f.eq(k-1));h&&(g=p(d-1,!0),h.css("left",g+"%").data("x",g),s=!0)}else d=a.number;if(N&&b.isCarousel){l=l||0;if(c)t.one(m.toLowerCase()+"TransitionEnd transitionend",c);y[m+"Transition"]=
	e?e/1E3+"s":"";y[m+"Transform"]="translateX("+-1*(p(d-1,!0)-l)+"%)"}else t.animate({left:p(d-1)+"%"},e,c)}function M(e){f.removeClass(b.classActive);a.slideNext.addClass(b.classActive);a.slide=a.slideNext;v=!1;y[m+"Transition"]="";b.canLoop&&s&&(s=!1,O(),r(0));z();e&&"click"===e.type&&a.slide.focus();G&&G.call(a)}function p(a,b){return b?a*(100/k):-100*a}function z(e){u&&(e?l(e,{slide:A.index(this)}):A.removeAttr("class").eq(a.number-1).addClass(b.classActive))}function L(){if(!b.canLoop&&!B)switch(P.removeClass(b.classDisabled),
	a.number){case 1:C.addClass(b.classDisabled);break;case k:D.addClass(b.classDisabled)}}function O(){for(var a=k,b,c,d;a--;)d=f.eq(a),b=d.data("x"),c=p(a,!0)+"%",c!==b&&(b=c,d.css({left:b,display:"block"}).attr("tabindex","-1").data("x",b))}function Q(b){E&&clearTimeout(E);E=setTimeout(function(){a.width=c.outerWidth()},b?300:0)}for(var a=this,q=["ms","O","Moz","Webkit",""],m=q[q.length],y,b={next:"button.next",previous:"button.previous",classStrip:"strip",classSlide:"slide",classActive:"sticky",classMarkers:"markers",
	classDisabled:"disabled",classTouch:"touch",delay:3E3,interval:5E3,time:400,canLoop:!0,isManual:!1,isCarousel:!0},c,f,t,u,A,P,C,D,I,H,E,v,s,j,k,N,S=document.body.style,F=q.length;F--;)if("string"===typeof S[q[F]+"Transition"]){m=q[F];break}N=!!m;var B="ontouchstart"in window||navigator.msPointerEnabled||window.DocumentTouch&&document instanceof DocumentTouch;$.each(R,function(a,c){b[a]=c});a.element=c;a.strip=t;a.slides=f;a.init=function(){c=$(b.slideshow);f=c.find("."+b.classSlide);t=c.find("."+
	b.classStrip);k=f.length;if(c.length&&!(2>k)){y=t[0].style;a.slide=f.filter("."+b.classActive);a.number=f.index(a.slide)+1;a.slide.length||(a.number=1,a.slide=f.eq(a.number-1).addClass(b.classActive));B&&(b.canLoop=!1,b.isCarousel=!0,c.addClass(b.classTouch));t.width(100*k+"%");f.width(100/k+"%");O();c.mouseenter(x).mouseleave(w);if(B){var e,n,m=function(c){var d=c.originalEvent,f=d.touches&&d.touches[0]||d;if(!(1<f.length||d.scale&&1!==d.scale))if(e=(f.pageX||f.screenX)-h.x,n=(f.pageY||f.screenY)-
	h.y,"undefined"===typeof g&&(g=!!(g||Math.abs(e)<Math.abs(n))),!g){c.preventDefault();x();j=0<e;if(!b.canLoop&&(j&&1===a.number||!j&&a.number===k))e/=Math.abs(e)/a.width+1;r(0,void 0,e/a.width*(100/k))}},d=function(){g||((250>+new Date-h.time&&20<Math.abs(e)||Math.abs(e)>a.width/3)&&!(j&&1===a.number||!j&&a.number===k)?l(void 0,{isPrev:j}):r(b.time));c.off(p,m);c.off(q,d)},h,g,p="touchmove MSPointerMove",q="touchend touchleave touchcancel MSPointerUp MSPointerOut";c.on("touchstart MSPointerDown",
	function(a){var b=a.originalEvent,b=b.touches&&b.touches[0]||b;u.has(a.target).length||(v&&M(),h={x:b.pageX||b.screenX,y:b.pageY||b.screenY,time:+new Date},g=n=e=void 0,c.on(p,m),c.on(q,d))});c.on("click",function(a){!g&&v&&a.preventDefault()});Q();$(window).resize(Q)}else f.click(l),D=c.find(b.next).on("click",J),C=c.find(b.previous).on("click",K),P=C.add(D).css("display","block");if(b.classMarkers){u=$("<div />").addClass(b.classMarkers).on("click touchend","button",z);for(var s=k;s--;)u.prepend($("<button>"+
	(s+1)+"</button>"));A=u.find("button");c.append(u)}L();z();r(0);I=setTimeout(w,b.delay)}};a.start=w;a.stop=x;a.change=l;a.next=J;a.prev=K;a.transition=r;a.getTransitionX=p};